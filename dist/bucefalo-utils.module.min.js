var bucefalo={};bucefalo.dict=bucefalo.dictionary=function(){var a=[],b={};return{add:function(c,d){return a.indexOf(c)===-1&&a.push(c),b[c]=d,!0},get:function(a){return b[a]},remove:function(c){var d=a.indexOf(c);return d!==-1&&(a.splice(d,1),b[c]=null,delete b[c]),!0},exist:function(b){return a.indexOf(b)!==-1},indexOf:function(b){return a.indexOf(b)},elements:a,mappers:b}},bucefalo.promise=function(a){var b=[],c=[],d=a,e,f={succeed:function(a){var c=b.length;d=a;while(c--)b[c](a)},fail:function(a){var b=c.length;e=a;while(b--)c[b](a)},success:function(a){d!==undefined?a(d):b.push(a)},error:function(a){e!==undefined?a(e):c.push(a)},then:function(a){e===undefined&&d===undefined?(c.push(a),b.push(a)):(e!==undefined&&a(e),d!==undefined&&a(d))}};return f.onError=f.e=f.error,f.onSuccess=f.s=f.success,f.f=f.failed=f.fail,f.ok=f.succeeded,f},bucefalo.promise.when=function(){var a=bucefalo.promise(),b=0,c=arguments.length,d=c,e,f=[],g=function(d){return function(){b+=1,f[d]=arguments,b===c&&a.succeed(f)}};while(d--)e=c-1-d,arguments[e].then(g(e));return a},bucefalo.cache=function(a){var b=[],c={};return function(d,e){var f=b.indexOf(d);f===-1?a(d,function(a){b.push(d),c[d]=a,e(a)}):e(c[b[f]])}},bucefalo.cache.async=function(a){var b=0;return function(c){var d=b;return b+=1,function(b,e){a.get(d+""+b,function(f,g){f||g===undefined?c(b,function(c){a.set(d+""+b,c,function(a){a?e(a):e(c)})}):e(g)})}}},module.exports=bucefalo;