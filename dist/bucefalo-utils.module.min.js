var bucefalo={};bucefalo.dict=bucefalo.dictionary=function(){var a=[],b={};return{add:function(c,d){return a.indexOf(c)===-1&&a.push(c),b[c]=d,!0},get:function(a){return b[a]},remove:function(c){var d=a.indexOf(c);return d!==-1&&(a.splice(d,1),b[c]=null,delete b[c]),!0},exist:function(b){return a.indexOf(b)!==-1},indexOf:function(b){return a.indexOf(b)},elements:a,mappers:b}},bucefalo.promise=function(a){var b=[],c=[],d=a,e,f={succeed:function(a){var c=b.length;d=a;while(c--)b[c](a)},fail:function(a){var b=c.length;e=a;while(b--)c[b](a)},success:function(a){a&&typeof a=="function"&&(d!==undefined?a(d):b.push(a))},error:function(a){a&&typeof a=="function"&&(e!==undefined?a(e):c.push(a))},then:function(a,f){e===undefined&&d===undefined?(f&&typeof f=="function"&&c.push(f),a&&typeof a=="function"&&b.push(a)):(e!==undefined&&f(e),d!==undefined&&a(d))}};return f.promise=function(){return{success:f.success,error:f.error,then:f.then}},f.onError=f.e=f.error,f.onSuccess=f.s=f.success,f.f=f.failed=f.fail,f.ok=f.succeeded,f},bucefalo.promise.when=function(){var a=bucefalo.promise(),b=0,c=arguments.length,d=c-1,e,f,g=[],h=function(c){return function(){b+=1,g[c]=arguments,b===d+1&&a.succeed(g)}};while(c--)e=d-c,f=h(e),arguments[e].then(f,f);return a},bucefalo.cache=function(a){var b=[],c={};return function(d,e){var f=b.indexOf(d);f===-1?a(d,function(a){b.push(d),c[d]=a,e(a)}):e(c[b[f]])}},bucefalo.cache.async=function(a){var b=0;return function(c){var d=b;return b+=1,function(b,e){a.get(d+""+b,function(f,g){f||g===undefined?c(b,function(c){a.set(d+""+b,c,function(a){a?e(a):e(c)})}):e(g)})}}},bucefalo.monads={compose:function(a,b){return function(c){return b(a(c))}},pipe:function(a){var b=a.length-1;return function(c){var d=a.length;while(d--)c=a[b-d](c);return c}},pipex:function(a,b){var c=b.length,d=c-1;while(c--)a=b[d-c](a);return a},bindfns:function(a,b){var c=a.length;while(c--)a[c]=b(a[c]);return a},pipebindunit:function(a,b,c){return this.compose(c,this.pipe(this.bindfns(a,b)))}},bucefalo.monads.list={bind:function(a){return function(b){var c=b.length,d=c-1,e=[];while(c--)e=e.concat(a(b[d-c]));return e}},bindx:function(a,b){var c=a.length,d=c-1,e=[];while(c--)e=e.concat(b(a[d-c]));return e},unit:function(a){return[a]},pipe:function(a){return bucefalo.monads.pipebindunit(a,this.bind,this.unit)}},bucefalo.monads.promise={bind:function(a){return function(b){var c=bucefalo.promise();return b.then(function(b){a(b).then(function(a){c.succeed(a)})}),c}},unit:function(a){return bucefalo.promise(a)},pipe:function(a){return bucefalo.monads.pipebindunit(a,this.bind,this.unit)}},bucefalo.transformer=function(a){var b=function(a,b){var c=a,d,e=b.split("."),f=e.length,g;for(g=0;g<f;g+=1)c!==undefined&&(c=c[e[g]]);return c},c=function(a,c){var d,e,f,g,h;if(c){f=[],e=a.length;for(d=0;d<e;d+=1){h=!0;for(g in c)b(a[d],g)!==c[g]&&(h=!1);h&&f.push(a[d])}return f}return a},d=function(a,c){var d,f,g;if(c&&a){d=[];switch(typeof c){case"object":g=a.length;for(f=0;f<g;f+=1)d.push(e(c,a[f]));break;case"string":g=a.length;for(f=0;f<g;f+=1)d.push(b(a[f],c))}return d}return a},e=function(a,f){var g,h,i,j={};for(g in a)switch(typeof a[g]){case"string":j[g]=b(f,a[g]);break;case"object":Array.isArray(a[g])?(h=a[g],i=b(f,h[0]),i=c(i,h[1].where),i=d(i,h[1].select),i&&h[1].one?j[g]=i[0]:j[g]=i):j[g]=e(a[g],f)}return j};return function(b){return e(a,b)}},module.exports=bucefalo;